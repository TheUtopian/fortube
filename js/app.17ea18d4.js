(function(){"use strict";var t={5197:function(t,e,n){var o=n(5130);const a="https://backend.utopia.az/";var i={async categories(){return[0,1,2,10,15,17,19,20,24,25,27,29]},async content(t){return fetch(`/db/content-${t}.json`).then((t=>t.json()))},async video(t){return fetch(`${a}video/${t}`).then((t=>t.json()))},rateVideo(t,e){fetch(`${a}rate/${t}/${e}`,{mode:"no-cors"})}},r=n(6768);const l=(0,r.Lk)("svg",{height:"2.5em",width:"2.5em",viewBox:"0 0 24 24",fill:"currentColor"},[(0,r.Lk)("path",{d:"m 11,6 v 2 h 2 V 6 Z m -1,4 -0.9999999,1 H 11 v 6 H 9.0000001 v 1 H 10 h 4 1 v -1 h -2 v -7 z"})],-1),s=[l],c={class:"container-lg"},d={class:"row"},u={class:"col-12 col-lg"},h={class:"col-12 col-lg-auto"};function g(t,e,n,a,i,l){const g=(0,r.g2)("SideBar"),v=(0,r.g2)("YouTube"),y=(0,r.g2)("WelcomeModal");return(0,r.uX)(),(0,r.CE)(r.FK,null,[i.loaded?((0,r.uX)(),(0,r.CE)("button",{key:0,type:"button",id:"info-btn",class:"btn btn-outline-default",onClick:e[0]||(e[0]=e=>t.$refs.infoBtn.show())},s)):(0,r.Q3)("",!0),(0,r.bo)((0,r.Lk)("div",c,[(0,r.Lk)("div",d,[(0,r.Lk)("div",u,[(0,r.bF)(g,{history:i.history,onChange:l.categoryChanged,onClear:l.clearHistory,content:i.content},null,8,["history","onChange","onClear","content"])]),(0,r.Lk)("div",h,[i.loading?((0,r.uX)(),(0,r.Wv)(v,{key:0,category:i.category,paused:i.paused,onChange:l.changed,onReady:l.playerLoaded,content:i.content},null,8,["category","paused","onChange","onReady","content"])):(0,r.Q3)("",!0)])])],512),[[o.aG,i.loaded]]),i.loaded?((0,r.uX)(),(0,r.Wv)(y,{key:1,ref:"infoBtn",onChange:l.opened,onChangeLang:l.langChanged,content:i.content.modal},null,8,["onChange","onChangeLang","content"])):(0,r.Q3)("",!0)],64)}n(4114);var v=n(4232);const y={class:"modal"},p={class:"body"},m=(0,r.Lk)("hr",null,null,-1),k={class:"row"},b={class:"col-auto"},f=["value"],L=(0,r.Lk)("div",{class:"col"},null,-1),C={class:"col-auto"};function w(t,e,n,a,i,l){return(0,r.uX)(),(0,r.Wv)(o.eB,{name:"fade"},{default:(0,r.k6)((()=>[(0,r.bo)((0,r.Lk)("div",{id:"welcome-modal",ref:"welcomeModal",onClick:e[2]||(e[2]=(...t)=>l.close&&l.close(...t)),class:"modal-overlay"},[(0,r.Lk)("div",y,[(0,r.Lk)("div",p,[(0,r.Lk)("h2",null,(0,v.v_)(n.content.header),1),(0,r.Lk)("p",null,(0,v.v_)(n.content.content),1),(0,r.Lk)("ol",null,[(0,r.Lk)("li",null,(0,v.v_)(n.content.rules[0]),1),(0,r.Lk)("li",null,(0,v.v_)(n.content.rules[1]),1),(0,r.Lk)("li",null,(0,v.v_)(n.content.rules[2]),1),(0,r.Lk)("li",null,(0,v.v_)(n.content.rules[3]),1),(0,r.Lk)("li",null,(0,v.v_)(n.content.rules[4]),1)]),(0,r.Lk)("p",null,(0,v.v_)(n.content.congrat),1),m,(0,r.Lk)("div",k,[(0,r.Lk)("div",b,[(0,r.bo)((0,r.Lk)("select",{class:"lang-select btn btn-outline-default","onUpdate:modelValue":e[0]||(e[0]=t=>i.lang=t)},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.langList,(({value:t,text:e})=>((0,r.uX)(),(0,r.CE)("option",{key:t,value:t},(0,v.v_)(e),9,f)))),128))],512),[[o.u1,i.lang]])]),L,(0,r.Lk)("div",C,[(0,r.Lk)("button",{type:"button",class:"btn btn-success",onClick:e[1]||(e[1]=(...t)=>l.getMatured&&l.getMatured(...t))},(0,v.v_)(n.content.btn),1)])])])])],512),[[o.aG,i.opened]])])),_:1})}var _={name:"CWelcome",props:["content"],emits:["changeLang","open"],expose:["show"],data(){return{opened:"1"!=localStorage.getItem("matured"),lang:localStorage.getItem("lang"),langList:[{value:"en",text:"English"},{value:"ru",text:"Русский"}]}},watch:{opened:{handler(t){this.$emit("change",t)},immediate:!0},lang(t){i.content(t).then((e=>{localStorage.setItem("lang",t),this.$emit("changeLang",e)}))}},methods:{show(){this.opened=!0},close(t){"1"==localStorage.getItem("matured")&&t.target===this.$refs.welcomeModal&&(this.opened=!1)},getMatured(){localStorage.setItem("matured","1"),this.opened=!1},setLang(t){i.content(t).then((e=>{this.lang=t,localStorage.setItem("lang",t),this.$emit("changeLang",e)}))}}},x=n(1241);const I=(0,x.A)(_,[["render",w]]);var E=I;const S=(0,r.Lk)("div",{id:"ytplayer"},null,-1),X={class:"row p-3"},O={class:"col"},$={class:"description"},B={class:"col-auto"},F={class:"row"},M={class:"col"},j={class:"col"},A={class:"col"};function T(t,e,n,o,a,i){const l=(0,r.g2)("RateButton");return(0,r.uX)(),(0,r.CE)(r.FK,null,[S,(0,r.Lk)("div",X,[(0,r.Lk)("div",O,[(0,r.Lk)("p",$,(0,v.v_)(a.video.views.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g," "))+" "+(0,v.v_)(1==a.video.views?n.content.view:n.content.views),1)]),(0,r.Lk)("div",B,[(0,r.Lk)("div",F,[(0,r.Lk)("div",M,[(0,r.bF)(l,{type:"plus",onClick:e[0]||(e[0]=t=>i.next("p")),remaining:a.timer.rate},null,8,["remaining"])]),(0,r.Lk)("div",j,[(0,r.bF)(l,{type:"default",onClick:e[1]||(e[1]=t=>i.next("e")),remaining:a.timer.skip},null,8,["remaining"])]),(0,r.Lk)("div",A,[(0,r.bF)(l,{type:"minus",onClick:e[2]||(e[2]=t=>i.next("n")),remaining:a.timer.rate},null,8,["remaining"])])])])])],64)}function V(t,e,n){return Math.min(Math.max(t,e),n)}var N=class{constructor(){this.id=0,this.rate=1/0,this.skip=1/0}start(t){0===this.id&&(this.skip=3,this.rate=V(Math.ceil(t),3,90)),this.id=setInterval(this.decrease.bind(this),1e3)}stop(){clearInterval(this.id)}decrease(){this.rate>0&&(this.rate-=1),this.skip>0&&(this.skip-=1)}};const P=["disabled"],Y={key:0},K={style:{"shape-rendering":"auto"},width:"32px",height:"32px",viewBox:"0 0 100 100"},R=(0,r.Lk)("path",{fill:"none",stroke:"currentColor","stroke-width":"5","stroke-dasharray":"179.61224975585938 76.97667846679687",d:"M24.3 30C11.4 30 5 43.3 5 50s6.4 20 19.3 20c19.3 0 32.1-40 51.4-40 C88.6 30 95 43.3 95 50s-6.4 20-19.3 20C56.4 70 43.6 30 24.3 30z","stroke-linecap":"round"},[(0,r.Lk)("animate",{attributeName:"stroke-dashoffset",repeatCount:"indefinite",dur:"1s",keyTimes:"0;1",values:"0;256.58892822265625"})],-1),W=[R],H={key:1},z={key:2},G={width:"32",height:"32",fill:"currentColor"},Q=(0,r.Lk)("rect",{x:"4",y:"14",width:"24",height:"4",rx:"2"},null,-1),U=(0,r.Lk)("rect",{x:"14",y:"4",width:"4",height:"24",rx:"2"},null,-1),D={key:1,x:"4",y:"14",width:"24",height:"4",rx:"2"},J=(0,r.Lk)("rect",{x:"4",y:"8",width:"24",height:"4",rx:"2"},null,-1),Z=(0,r.Lk)("rect",{x:"4",y:"20",width:"24",height:"4",rx:"2"},null,-1);function q(t,e,n,o,a,i){return(0,r.uX)(),(0,r.CE)("button",{type:"button",class:(0,v.C4)([i.btnClass,"btn btn-rate"]),disabled:0!==n.remaining},[n.remaining==1/0?((0,r.uX)(),(0,r.CE)("span",Y,[((0,r.uX)(),(0,r.CE)("svg",K,W))])):n.remaining>0?((0,r.uX)(),(0,r.CE)("span",H,(0,v.v_)(n.remaining),1)):((0,r.uX)(),(0,r.CE)("span",z,[((0,r.uX)(),(0,r.CE)("svg",G,["plus"===n.type?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[Q,U],64)):"minus"===n.type?((0,r.uX)(),(0,r.CE)("rect",D)):((0,r.uX)(),(0,r.CE)(r.FK,{key:2},[J,Z],64))]))]))],10,P)}var tt={props:["type","remaining"],data(){return{}},computed:{btnClass(){return"btn-outline-"+("plus"===this.type?"danger":"minus"===this.type?"primary":"default")}}};const et=(0,x.A)(tt,[["render",q]]);var nt=et,ot={name:"YouTube",components:{RateButton:nt},props:{category:Number,paused:Boolean,content:Object},emits:["ready","change","error"],data(){return{timer:new N,video:{id:0,views:0},player:null}},watch:{paused(t){t?this.player.pauseVideo():this.player.playVideo()}},created(){i.video(this.category).then((t=>{window.onYouTubeIframeAPIReady=()=>{this.player=new window.YT.Player("ytplayer",{width:null,height:null,videoId:t.id,playerVars:{origin:location.origin,modestbranding:"1",iv_load_policy:"3",rel:"0",autoplay:this.paused?"0":"1",showinfo:"0"},events:{onReady:()=>{this.video=t,this.$emit("ready")},onStateChange:t=>{this.timer.stop(),t.data==window.YT.PlayerState.BUFFERING&&this.paused&&this.player.pauseVideo(),t.data==window.YT.PlayerState.PLAYING&&this.timer.start(t.target.getDuration()/64)},onError:()=>this.next("n")}})};const e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",document.head.appendChild(e)}))},beforeUnmount(){this.rate("e")},methods:{next(t){this.timer=new N,this.rate(t),i.video(this.category).then((e=>{const n=this.player.getVideoData();n.title.length&&this.$emit("change",{id:n.video_id,title:n.title,rating:t}),this.player.loadVideoById(e.id),this.video=e})).catch((()=>{this.next("e")}))},rate(t){i.rateVideo(this.video.id,t)}}};const at=(0,x.A)(ot,[["render",T]]);var it=at;const rt={class:"sidebar"},lt={class:"caption"},st=["disabled"],ct=["href"],dt=["disabled","onClick"],ut=(0,r.Lk)("div",{class:"category-arrow"},[(0,r.Lk)("svg",{width:"24",height:"24",viewBox:"0 0 32 32",fill:"currentColor"},[(0,r.Lk)("path",{d:"M 27.721991,23.326889 A 1.4652985,1.4652985 0 0 1 26.681629,22.901953 L 15.999603,12.205274 5.3175771,22.901953 A 1.471294,1.471294 0 1 1 3.2368532,20.821229 L 14.959241,9.0988412 a 1.4652985,1.4652985 0 0 1 2.080724,0 L 28.762353,20.821229 a 1.4652985,1.4652985 0 0 1 0,2.080724 1.4652985,1.4652985 0 0 1 -1.040362,0.424936 z"})])],-1),ht={class:"category-caption"};function gt(t,e,n,o,a,i){return(0,r.uX)(),(0,r.CE)("div",rt,[(0,r.Lk)("h3",lt,[(0,r.Lk)("span",null,[(0,r.eW)((0,v.v_)(n.content.history),1),(0,r.Lk)("button",{type:"button",class:"btn btn-danger",disabled:0==n.history.length,onClick:e[0]||(e[0]=e=>t.$emit("clear"))},(0,v.v_)(n.content.clear),9,st)]),(0,r.Lk)("span",null,(0,v.v_)(n.history.length),1)]),(0,r.Lk)("ul",{class:(0,v.C4)(["history-list",{active:!a.is_category_active}]),ref:"historyList"},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.history,(({rating:t,id:e,title:n},o)=>((0,r.uX)(),(0,r.CE)("li",{key:o},[(0,r.Lk)("a",{class:(0,v.C4)(t),href:"https://www.youtube.com/watch?v="+e,target:"_blank"},(0,v.v_)(n),11,ct)])))),128))],2),(0,r.Lk)("ul",{class:(0,v.C4)(["category-list",{active:a.is_category_active}])},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(t.categories,(t=>((0,r.uX)(),(0,r.CE)("li",{key:t},[(0,r.Lk)("button",{target:"_blank",disabled:a.category==t,onClick:e=>i.setCategory(t)},(0,v.v_)(n.content.category[t]),9,dt)])))),128))],2),(0,r.Lk)("button",{class:(0,v.C4)(["category-show-btn",{active:a.is_category_active}]),onClick:e[1]||(e[1]=t=>a.is_category_active=!a.is_category_active)},[ut,(0,r.Lk)("div",ht,[(0,r.Lk)("span",null,(0,v.v_)(n.content.categories),1),(0,r.Lk)("span",null,(0,v.v_)(n.content.category[a.category]),1)])],2)])}var vt={props:{history:Array,content:Object},emits:["change","clear"],data(){return{category:Number(localStorage.getItem("category")),is_category_active:!1}},methods:{setCategory(t){this.is_category_active=!1,this.category=t,localStorage.setItem("category",t),this.$emit("change",t)}},mounted(){const t=new MutationObserver((t=>{t[0].target.scrollTo(0,1073741824)}));t.observe(this.$refs.historyList,{childList:!0}),this.$emit("change",Number(localStorage.getItem("category")))}};const yt=(0,x.A)(vt,[["render",gt]]);var pt=yt;const mt=document.getElementById("start-btn");var kt={name:"App",components:{WelcomeModal:E,YouTube:it,SideBar:pt},data(){const t=localStorage.getItem("history"),e=t?JSON.parse(t):[];return{content:this.content,history:e,category:Number(localStorage.getItem("category")),loading:!1,loaded:!1,paused:!1}},methods:{opened(t){this.paused=t},playerLoaded(){this.loaded=!0,mt.disabled=!1,mt.hidden=!0},langChanged(t){this.content=t},changed(t){this.history.push(t),localStorage.setItem("history",JSON.stringify(this.history))},categoryChanged(t){this.category=t},clearHistory(){localStorage.removeItem("history"),this.history.length=0}},created(){mt.disabled=!1,mt.addEventListener("click",(()=>{mt.disabled=!0,this.loading=!0}))}};const bt=(0,x.A)(kt,[["render",g]]);var ft=bt;document.body.classList.toggle("dark",localStorage.getItem("darkmode")),document.getElementById("theme-toggle-btn").addEventListener("click",(()=>{let t=document.body.classList.toggle("dark");localStorage.setItem("darkmode",t)}));const Lt=(0,o.Ef)(ft);i.categories().then((t=>{Lt.config.globalProperties.categories=t;let e=localStorage.getItem("lang");return null===e&&(e=-1===navigator.language.indexOf("ru")?"en":"ru",localStorage.setItem("lang",e)),e})).then(i.content).then((t=>{Lt.config.globalProperties.content=t,Lt.mount("#app")}))}},e={};function n(o){var a=e[o];if(void 0!==a)return a.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,o,a,i){if(!o){var r=1/0;for(d=0;d<t.length;d++){o=t[d][0],a=t[d][1],i=t[d][2];for(var l=!0,s=0;s<o.length;s++)(!1&i||r>=i)&&Object.keys(n.O).every((function(t){return n.O[t](o[s])}))?o.splice(s--,1):(l=!1,i<r&&(r=i));if(l){t.splice(d--,1);var c=a();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[o,a,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var a,i,r=o[0],l=o[1],s=o[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(s)var d=s(n)}for(e&&e(o);c<r.length;c++)i=r[c],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(d)},o=self["webpackChunkfortube"]=self["webpackChunkfortube"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(5197)}));o=n.O(o)})();